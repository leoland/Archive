"use strict";jQuery(document).ready(function(){jQuery("body").hasClass("logged-in")&&(auto_logout.init(),jQuery("body").append('<div id="timer"><div class="clock"><span id="mins-left">'+max_minutes+"</span>m</div></div>"))});var stamp,remote_stamp,begin,focus,local_stamp=(local_stamp=new Date).getTime(),max_minutes=60,step=1e4,max_time=60*max_minutes*1e3-1,time_left=max_time,push_time=function(){local_stamp=new Date,stamp=local_stamp.getTime(),jQuery.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"push_time_stamp",push_stamp:stamp},success:function(e){console.log("pushed a fresh stamp:"+e)}})},pull_time=function(){if(jQuery.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"pull_time_stamp"},success:function(e){remote_stamp=e}}),!document.hasFocus()&&remote_stamp>stamp){console.log("remote "+remote_stamp),console.log("local "+stamp);var e=remote_stamp-stamp;console.log("diff "+e),auto_logout.resetTimer(),stamp=remote_stamp}},countdown=function(){var e=((time_left-=step)/6e4).toFixed(0);jQuery("#mins-left").text(e),console.log(e+" minutes left"),1==focus&&(document.hasFocus()||(push_time(),focus=!1,console.log("count down push"))),!document.hasFocus()&&(focus=!1)&&pull_time()},auto_logout={timeoutID:0,init:function(){document.addEventListener("mousemove",auto_logout.resetTimer,!1),document.addEventListener("mousedown",auto_logout.resetTimer,!1),document.addEventListener("keypress",auto_logout.resetTimer,!1),document.addEventListener("DOMMouseScroll",auto_logout.resetTimer,!1),document.addEventListener("mousewheel",auto_logout.resetTimer,!1),document.addEventListener("touchmove",auto_logout.resetTimer,!1),document.addEventListener("MSPointerMove",auto_logout.resetTimer,!1)},startTimer:function(){begin=setInterval(countdown,step),auto_logout.timeoutID=window.setTimeout(auto_logout.goInactive,max_time)},resetTimer:function(){document.hasFocus()&&!0!==focus&&(focus=!0,console.log("into focus"),push_time()),window.clearInterval(begin),time_left=max_time,jQuery("#mins-left").text(max_minutes.toFixed(0)),window.clearTimeout(auto_logout.timeoutID),auto_logout.goActive()},endTimmer:function(){document.hasFocus()&&(document.removeEventListener("mousemove",auto_logout.resetTimer,!1),document.removeEventListener("mousedown",auto_logout.resetTimer,!1),document.removeEventListener("keypress",auto_logout.resetTimer,!1),document.removeEventListener("DOMMouseScroll",auto_logout.resetTimer,!1),document.removeEventListener("mousewheel",auto_logout.resetTimer,!1),document.removeEventListener("touchmove",auto_logout.resetTimer,!1),document.removeEventListener("MSPointerMove",auto_logout.resetTimer,!1))},goInactive:function(){var e={action:"auto_logout",time:!0,ajaxsecurity:ajax_object.logout_nonce};jQuery.post(ajax_object.ajax_url,e,function(e){auto_logout.endTimmer(),alert("You have been logged out due to inactivity."),window.location.href="/login/"})},goActive:function(){auto_logout.startTimer()}};